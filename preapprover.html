<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Pre‑Approver Dashboard</title>
  <link rel="stylesheet" href="theme.css" />
  <link rel="stylesheet" href="preapprover.css" />
</head>

<body style="margin:0; padding:0;">

  <nav class="profile-navbar">
    <div class="nav-left">
      <div id="preApproverLastLogin">Last login:</div>
    </div>

    <div class="nav-center">
      <h2 style="color:white;">Pre‑Approver Dashboard</h2>
    </div>

    <div class="nav-right">
      <button class="profile-signout-btn" type="button" id="logoutBtn">Sign Out</button>
    </div>
  </nav>

  <div class="form-container profile-form-container">

    <!-- Card 1: Data Visualization -->
    <div class="card" id="statsCard">
      <fieldset>
        <legend>Permit Status Overview</legend>
        <div style="display:flex; align-items:center; gap:30px; flex-wrap:wrap;">
          <div style="width:250px;">
            <canvas id="permitStatusChart"></canvas>
          </div>
          <div id="permitStats" style="font-size:14px; line-height:1.8;">
            <p><strong>Pending:</strong> <span id="statPending">0</span></p>
            <p><strong>In Progress:</strong> <span id="statInProgress">0</span></p>
            <p><strong>Approved:</strong> <span id="statApproved">0</span></p>
            <p><strong>Rejected:</strong> <span id="statRejected">0</span></p>
          </div>
        </div>
      </fieldset>
    </div>

    <!-- Card 2: Permits Pending Pre‑Approval (Table + Modal Hybrid) -->
    <div class="card" id="preApproverPermitsCard">
      <fieldset>
        <legend>Pending for Approval</legend>
        <table id="preApproverPermitTable">
          <thead>
            <tr>
              <th>Serial No.</th>
              <th>Submitted Date & Time</th>
              <th>Permit Title</th>
              <th>Requester</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- Dynamic rows will be injected via JS -->
          </tbody>
        </table>
      </fieldset>
    </div>

  </div>

  <!-- Modal for expanded details -->
  <div id="permitDetailModal" class="modal">
    <div class="modal-content">
      <span class="closeBtn">&times;</span>
      <h3>Permit Details</h3>
      <p><strong>Permit Title:</strong> <span id="modalPermitTitle"></span></p>
      <p><strong>Requester:</strong> <span id="modalRequester"></span></p>
      <p><strong>Status:</strong> <span id="modalStatus"></span></p>
      <p><strong>Submitted:</strong> <span id="modalSubmitted"></span></p>
      <p><strong>Comments:</strong> <span id="modalComments"></span></p>
      <div class="modal-actions">
        <button id="modalApproveBtn">Approve</button>
        <button id="modalRejectBtn">Reject</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="preapprover.js"></script>

</body>

</html>